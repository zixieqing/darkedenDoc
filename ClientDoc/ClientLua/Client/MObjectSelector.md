`MObjectSelector` 类的主要功能是选择和攻击游戏中的生物对象（`MCreature`）。它根据不同的条件来决定玩家是否可以选择或攻击特定的生物。以下是该类的主要功能和方法的详细解释：

### 主要功能

1. **选择目标**：
   - 根据玩家的状态、目标类型（敌人或朋友）、以及选择标准（按种族或公会）来判断是否可以选择某个生物。
   - 支持强制攻击和特定状态（如幻觉状态）下的选择。

2. **攻击判断**：
   - 判断玩家是否可以攻击某个生物，依据包括玩家的种族、公会、以及是否在战斗状态。
   - NPC（非玩家角色）始终可以被选择和攻击。

3. **战斗状态**：
   - 通过检查当前区域的战斗状态（如是否在战争区域）来决定攻击的合法性。

### 关键方法

#### 1. `CanSelect(MCreature* pCreature)`
- **功能**：判断玩家是否可以选择指定的生物。
- **逻辑**：
  - 如果按下了特定键（如 `DIK_LSHIFT`）或玩家处于幻觉状态，或者选择目标为所有生物，则可以选择任何生物。
  - 根据选择标准（按种族或公会）判断敌人或朋友的选择条件。
  - 检查是否在战斗状态或是否存在特定的攻击条件。

#### 2. `CanAttack(MCreature* pCreature)`
- **功能**：判断玩家是否可以攻击指定的生物。
- **逻辑**：
  - 依据玩家的状态（如强制攻击或幻觉状态）和生物的种族或公会进行判断。
  - NPC 永远可以被攻击。

#### 3. `IsWarEnemy(MCreature* pCreature)`
- **功能**：判断指定的生物是否是战争中的敌人。
- **逻辑**：
  - 检查当前区域是否为战斗区域，判断玩家和生物的公会状态，决定是否可以攻击。

### 总结
`MObjectSelector` 类通过多种条件和状态来控制玩家对生物的选择和攻击行为，确保游戏的战斗机制符合设定的规则和逻辑。这使得游戏中的互动更加丰富和有趣，也为玩家提供了策略选择的空间。